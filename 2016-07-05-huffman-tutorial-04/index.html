<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Cheuk&#39;s Blog: Huffman Tutorial Part 4</title>
    
<meta name="keywords" content="terminal,ncurses,ocaml,how-to,GNOME,imagemagick,testing,spoilers,neovim,github,jekyll,installation,config,tutorial,lightning,graphics,review,compression,transparent,tokenizer,group,exercise,Huffman,updates,games,project,gstreamer,easy,i3,wallclimbing,linux,encoder,interpretor,deemo,fun,rest,assignment,computer,perl,racket,TinyBASIC,writing,challenge,movie,unity,go,cli,bits,music,c++,status,dosbox,question,programming,death,chip8,visual,plane,apps,ruby,theory,amy tan,overcome,phone,ACE,vim,decompression,arch,flask,compton,qbasic,scrabble,pygame,python,emulator,bioperl,lambda,data,assembler,ray casting,bioinformatics,ctf,decoder,plugins,procrastination,journal,writeup,school,fire,cursive,basic,editor,Xorg,headers">

<meta name="description" content="Ah! Here is the fun part! Actually writing each individual bit into a file! So,
how does one go about doing it?You Don&#39;t">

<meta property="og:description" content="Ah! Here is the fun part! Actually writing each individual bit into a file! So,
how does one go about doing it?You Don&#39;t">

<meta property="og:url" content="https://cheuksblog.ca/2016-07-05-huffman-tutorial-04/" />
<meta property="og:title" content="Huffman Tutorial Part 4" />
<meta property="og:type" content="article" />

    <link rel="canonical" href="https://cheuksblog.ca/2016-07-05-huffman-tutorial-04/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="/css/gruvbox-dark.min.css" rel="stylesheet" type="text/css" />
    <link href="/css/main.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <div class="wrapper">
      <nav>
  <a href="/" class="nav-title">Cheuk&#39;s Blog</a>

  <a class="nav-links" href="/">Portfolio</a>
  <a class="nav-links" href="/archives">Posts</a>
</nav>


      
<article class="post">
    <div class="post-header">
    <div id="post-meta" class="row">
        <div class="col-lg-6">July 5, 2016</div>
        
    </div>
    <h2>Huffman Tutorial Part 4</h2>
</div>
<div>
    <ol class="toc"><li><a href="#you-dont">You Don't</a></li><li><a href="#bit-manipulation">Bit Manipulation</a></li><ol><li><a href="#and">AND</a></li><li><a href="#or">OR</a></li><li><a href="#not">NOT</a></li><li><a href="#xor">XOR</a></li></ol><li><a href="#writing-to-file">Writing to File</a></li><li><a href="#assignment-for-this-part">Assignment for This Part</a></li></ol>
    <p>Ah! Here is the fun part! Actually writing each individual bit into a file! So,
how does one go about doing it?</p><h4 id="you-dont">You Don't</h4><p>As mentioned before, you can't do that.</p><h2 id="bit-manipulation">Bit Manipulation</h2><p>That's why you need to manipulate the bits inside a byte! What you have to do
is this: push every 8 bits into a byte (<code>char</code>), and write said byte into a
file.</p><p>If you are very familiar with bitwise operators, you can just
<a href="#skipper">go right ahead</a>. For those who aren't, here is a refresher.</p><p>Note that I'll refer to logic gates as 'gates', and bitwise operators as
'operators'. Gates typically have 2 inputs and 1 output (either <code>0</code> or <code>1</code>,
which is 1 bit). Operators are just gates, only they are for bytes. They apply
the gate to each individual bit in the byte.</p><p>There are a few basic bitwise operators you need to know: <code>AND</code>, <code>OR</code>, <code>NOT</code>,
<code>XOR</code> come into mind.</p><hr /><h3 id="and">AND</h3><p>An <code>AND</code> gate only outputs <code>1</code> if all of it's inputs are <code>1</code>. Otherwise, it
outputs <code>0</code>. Here is a truth table:</p><p>a | b | out
--|---|----
0 | 0 | 0
0 | 1 | 0
1 | 0 | 0
1 | 1 | 1</p><p>Similarly, the <code>AND</code> operator applies an <code>AND</code> gate to each individual bit of
the inputs, and spitting it in it's place in the output. This is exactly the
same for all the other ones, so it won't be brought up again.</p><h3 id="or">OR</h3><p>An <code>OR</code> gate outputs <code>1</code> if at least 1 of the inputs are <code>1</code>.</p><p>a | b | out
--|---|----
0 | 0 | 0
0 | 1 | 1
1 | 0 | 1
1 | 1 | 1</p><h3 id="not">NOT</h3><p>A <code>NOT</code> gate outputs a <code>1</code> if the input is a <code>0</code>, and vice versa.</p><p>{:.table}
a | out
--|----
0 | 1
1 | 0</p><h3 id="xor">XOR</h3><p>An <code>XOR</code> gate (exclusive <code>OR</code>) outputs <code>1</code> if 1 and only 1 of the inputs are
<code>1</code>.</p><p>{:.table}
a | b | out
--|---|----
0 | 0 | 0
0 | 1 | 1
1 | 0 | 1
1 | 1 | 0</p><hr /><p><a name="skipper"></a>
Back to bit manipulation. Assuming you have a long <code>string</code> of binary ones and
zeros, you will need to take every 8 bits, and shove them into a byte. Here is
how it should go:</p><ol><li>Iterate through all binary digits</li><li>Is digit a 1?
<ol><li>Use <code>OR</code> operation to place <code>1</code> into temporary variable (<code>byte</code>)</li></ol></li><li>Increment counter (for which bit you are in the temporary variable)</li><li>Repeat until all binary digits are exhausted</li></ol><p>Now, the question becomes <em>how</em> can you do that. You shift the <code>1</code> by whatever
the counter is. <em><strong>Note that you may have to tinker around with how much you
shift by.</strong></em></p><pre><code class="cpp">string bs = "01001100";
char byte = 0;
for (unsigned i = 0; i &lt; 8; i++) {
    if (bs[i] == '1') byte |= 1 &lt;&lt; i;
}
</code></pre><p>That was a small snippet of how it is done. I didn't use <code>std::string</code>, and
instead opted to use a vector of bits (<code>bool</code>). For some systems, a
<code>std::vector&lt;bool&gt;</code> is a "space efficient specialization of <code>std::vector</code>" <sup id="fnref-1"><a class="footnote-ref" href="#fn-1">1</a></sup>.</p><p>Technically, you didn't need to know most of the gates written above. So yeah.
Made you look.</p><h2 id="writing-to-file">Writing to File</h2><p>Well, that's easy, now that you have an array/vector of bytes. You can just
iterate through all of them and write them all to a file.</p><h2 id="assignment-for-this-part">Assignment for This Part</h2><ul><li>iterate through input file and convert the chars into bits with the
map created in <a href="/huffman/2016/07/05/huffman-tutorial-03.html">the last part</a></li><li>:star: iterate through the bits and convert them into bytes</li><li>iterate through bytes and write them to file, after writing the header</li><li><em>close the file(s)</em></li></ul><p>(:star: denotes a challenging task. :star2: denotes an even more challenging
task.)</p><div class="footnotes"><hr /><ol><li id="fn-1"><p>https://en.cppreference.com/w/cpp/container/vector_bool</p><a href="#fnref-1" class="footnote-backref">â†©</a></li></ol></div>
</div>

<div id="post-tags">
    <b>Tags: </b>
    
    <a href="/compression/">compression</a>
    
    <a href="/Huffman/">Huffman</a>
    
    <a href="/encoder/">encoder</a>
    
    <a href="/bits/">bits</a>
    
    <a href="/c%2B%2B/">c++</a>
    
</div>


</article>
<footer class="post-foot">
  <span class="prev">
  
    <span>Prev</span>
    <a href="/2016-07-05-huffman-tutorial-01/">Huffman Tutorial Part 1</a>
  
  </span>
  <span class="next">
  
    <span>Next</span>
    <a href="/2016-04-17-tbasic-timeline/">Tiny BASIC Development - Timeline</a>
  
  </span>
</footer>

    </div>

    <script src="/js/highlight.pack.js" type="application/javascript"></script>
    <script defer>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
